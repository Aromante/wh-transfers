name = "transfers-worker"
main = "src/index.ts"
compatibility_date = "2024-10-01"

[vars]
## Non-secret vars. You can also set these per env.
# SUPABASE_URL = "https://<project>.supabase.co"
# CORS_ORIGIN = "https://<shell-domain>"
# SHOPIFY_API_VERSION = "2024-10" # o "unstable" si tu tenant lo requiere
# ENABLE_MULTI_DRAFTS = "0" # poner "1" para habilitar endpoints de borradores
# MAX_DRAFTS_PER_OWNER = "3"

# Secrets needed:
# - SUPABASE_SERVICE_ROLE (secret)
# - ODOO_URL
# - ODOO_DB
# - ODOO_UID
# - ODOO_API_KEY (or password)

[env.staging]
name = "transfers-worker-staging"
[env.staging.vars]
# SUPABASE_URL = "https://<project>.supabase.co"
# CORS_ORIGIN = "http://127.0.0.1:8085"

[env.production]
name = "transfers-worker"
[env.production.vars]
# Non-secret production defaults managed via TOML
ENABLE_MULTI_DRAFTS = "1"
MAX_DRAFTS_PER_OWNER = "3"
SHOPIFY_REPLICATE_TRANSFERS = "1"
ODOO_AUTO_VALIDATE = "1"
# During local development with Vite, allow any origin; replace with your Pages domain for production
CORS_ORIGIN = "*"
# SUPABASE_URL and CORS_ORIGIN can be set here or via Dashboard if preferred
# SUPABASE_URL = "https://<project>.supabase.co"
# CORS_ORIGIN = "https://<shell-domain>"
